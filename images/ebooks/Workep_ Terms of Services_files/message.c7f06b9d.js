(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{878:function(e,t,n){"use strict";n.d(t,"b",function(){return l});var o=n(23),r=n(893),d=n(59),i=n(16),h=n(14),a=n(226),s=n(65),c=n(73),m=n(241),f=n(20),l=function(n,o,e){return Object.assign({},n,o,e,{onOpen:function(){var e=n.conversation,t=n.part;o.onOpen(e.id,t.id)},onConversationRead:function(){o.onConversationRead(n.conversation.id)},onComposerOrFormInputClick:function(){o.onComposerOrFormInputClick(n.conversation.id)},onReactionSelect:function(e){o.onReactionSelect(n.conversation.id,e)},onClose:function(){var e=n.conversation;o.onClose(e.id)}})};t.a=Object(o.b)(function(e){var t,n=e.user.isPresent,o=e.app,r=o.name,i=o.userConversationAttachmentsEnabled,a=o.userConversationGifsEnabled,s=e.message.partId,c=Object(m.a)(e)[0],l=h.a.isMobileBrowser(),p=void 0!==s?c.parts.find(function(e){return e.id===s}):(t=c).readAt?Object(f.r)(t):Object(f.b)(t),u=p.messageType;return u=u||"adminReply",{appName:r,conversation:c,part:p=Object.assign({},p,{messageType:u}),userIsPresent:n,isMobile:l,showUploadButton:i,showGifButton:a,shouldShowUpfrontEmailComposer:Object(d.g)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}},function(n){return{onOpen:function(e,t){n(Object(a.b)(e,t)),n(Object(a.c)(e,t))},onClose:function(){n(Object(a.a)())},onConversationRead:function(e){n(Object(c.n)(i.a,e))},onComposerOrFormInputClick:function(e){n(Object(a.a)()),n(Object(s.g)(e)),n(Object(c.l)(i.a,e))},onReactionSelect:function(e,t){n(Object(c.k)(i.a,e,t,!1))}}},l)(r.a)},893:function(e,t,n){"use strict";var o=n(2),r=n.n(o),p=n(0),h=n.n(p),i=n(899),a=n(870),u=n(15),c=n(14),l=n(181),d=n(850),m=n(852),s=n(5),f=n(123),b=n(135),v=n.n(b),g=n(108),y=n.n(g),C={name:"zrr1m9",styles:"right:auto;"},O={name:"1w21syu",styles:"width:calc(100% - 75px);"},w=s.c.div("z-index:",Object(f.d)(),";position:fixed;bottom:",Object(s.f)("verticalPadding"),"px;right:",Object(s.f)("horizontalPadding"),"px;width:260px;max-width:260px;font-family:",Object(s.f)("fontSansSerif"),";",function(e){var t=e.theme;return t.isLeftAlign&&Object(s.b)("left:",t.horizontalPadding+t.borderlessAvatarOffsetWidth,"px;.intercom-chat-composer{margin-left:",-t.borderlessAvatarOffsetWidth,"px;width:calc(100% + ",t.borderlessAvatarOffsetWidth,"px);}")}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&Object(s.b)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding,"px;")}," ",function(e){return e.theme.isMobileSize&&O}," ",function(e){var t=e.theme;return t.isMobileSize&&t.isLeftAlign&&C}),k=s.c.div("position:absolute;top:3px;right:3px;width:12px;height:12px;padding:10px;background-position:center;",Object(f.b)(v.a,y.a,"12px","12px"),";span{display:none;}");var E=function(s){var e,t;function n(){for(var t,e,n,o,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i))||this,e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=function(e){e.stopPropagation(),t.props.onClose()},(n="handleDismissClick")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,t}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.renderComposer=function(){var e=this.props.part.author.firstName;return h.a.createElement("div",{className:"intercom-chat-composer"},h.a.createElement("span",{className:"intercom-composer-placeholder"},Object(u.c)("reply_to_name",{name:e})),h.a.createElement("div",{className:"intercom-composer-buttons"},h.a.createElement("span",{className:"intercom-composer-emoji-button"},h.a.createElement(m.a,null)),h.a.createElement("span",{className:"intercom-composer-upload-button"},h.a.createElement(d.a,null))))},o.renderAttributeCollectorCard=function(){return h.a.createElement(a.a,{part:this.props.part,hasAvatar:!1,isBorderless:Object(c.e)(),isMobile:Object(c.e)(),isReplyType:!0,frameWindow:this.props.frameWindow,key:Object(l.a)(JSON.stringify(this.props.part))})},o.renderDismissButton=function(){return h.a.createElement(k,{onClick:this.handleDismissClick},h.a.createElement("span",null,Object(u.c)("clear")))},o.renderReplyType=function(){switch(this.props.part.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}},o.renderChatCardGroup=function(){return h.a.createElement(i.a,{appName:this.props.appName,part:this.props.part,isBorderless:Object(c.e)(),isMobile:Object(c.e)(),frameWindow:this.props.frameWindow})},o.render=function(){var e=this.props,t=e.composerState,n=e.onComposerOrFormInputClick;return h.a.createElement(w,{className:"intercom-chat",onClick:n},this.renderChatCardGroup(),this.renderDismissButton(),t.visible&&this.renderReplyType())},n}(p.Component),S=n(505),x=n(233),j={name:"145vpms",styles:"left:0;right:auto;"},R=Object(s.c)(x.a)("z-index:",Object(f.d)(),";position:fixed;max-width:360px;width:calc(100% - 25px);right:0;",function(e){var t=e.height;return Object(s.b)("bottom:0;height:",t+20,"px;")}," ",function(e){return e.theme.isLeftAlign&&j}," ",function(e){var t=e.theme,n=e.height;return t.isLauncherEnabled&&Object(s.b)("height:",n+t.launcherOffsetBottomPadding+20,"px;")}),_=n(513);function T(e){var t=e.appName,n=e.part,o=e.onClose,r=e.onComposerOrFormInputClick,i=e.composerState,a=Object(p.useState)(0),s=a[0],c=a[1],l=function(e){var t=e.height;return c(t)};return h.a.createElement(R,{frameName:"intercom-chat-frame",height:s},function(e){return h.a.createElement(h.a.Fragment,null,h.a.createElement(S.a,{onChange:l},h.a.createElement(E,{appName:t,part:n,onClose:o,composerState:i,onComposerOrFormInputClick:r,frameWindow:e})),h.a.createElement(_.a,{appWindow:e}))})}var I=n(11),N=n.n(I),P=n(851),M=n(842),B=n(847),A=n(856),H=n(13),F=n(882),D=n(866);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return q(V(o=r.call.apply(r,[this].concat(t))||this),"state",{isFooterVisible:!0,isScrolled:!1}),q(V(o),"handleScroll",function(e){var t=o.state.isFooterVisible,n=Object(H.k)(e.target);o.setState({isFooterVisible:t||n<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),q(V(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,n=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:n})}),q(V(o),"getBodyClassName",function(){return N()({"intercom-note-body":!0,"intercom-note-reply-to-body":o.props.showReplyToButton})}),q(V(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,n=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"note",message_id:t,conversation_id:n})}),q(V(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return N()({"intercom-note":!0,"intercom-note-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return N()({"intercom-note-footer":!0,"intercom-note-footer-visible":this.state.isFooterVisible,"intercom-note-footer-text-center":this.props.showReplyToButton})},o.renderFooter=function(){var t=this,e=this.props,n=e.showUploadButton,o=e.showGifButton;return e.showReplyToButton?h.a.createElement(D.a,{onClick:this.handleComposerClick}):h.a.createElement("div",{className:"intercom-note-composer",onClick:t.handleComposerClick,"aria-label":Object(u.c)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},h.a.createElement("span",{className:"intercom-composer-placeholder"},Object(u.c)("reply_to_conversation")),h.a.createElement("div",{className:"intercom-composer-buttons"},o?h.a.createElement("span",{className:"intercom-composer-gif-button"},h.a.createElement(F.a,null)):null,h.a.createElement("span",{className:"intercom-composer-emoji-button"},h.a.createElement(m.a,null)),n?h.a.createElement("span",{className:"intercom-composer-upload-button"},h.a.createElement(d.a,null)):null))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,n=e.onReactionSelect;return h.a.createElement(A.a,W({},t,{onReactionSelect:n}))},o.render=function(){var t=this,e=this.props,n=e.appName,o=e.message,r=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=o.author,c=o.lastActiveAt,l=o.body;return h.a.createElement("div",{className:this.getClassNames()},h.a.createElement(B.a,{appName:n,isReplyStyle:!1,author:s,lastActiveAt:c},h.a.createElement("span",{className:"intercom-note-close intercom-anchor",onClick:i,"aria-label":Object(u.c)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"},"Â "),h.a.createElement("div",{className:this.getBodyClassName()},h.a.createElement(P.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},h.a.createElement(M.a,{blocks:l,zoomable:!0,frameWindow:a}))),h.a.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},r?this.renderReactionPicker():this.renderFooter())))},n}(p.Component);L.propTypes={appName:r.a.string.isRequired,message:r.a.shape({author:r.a.object.isRequired,body:r.a.array.isRequired,lastActiveAt:r.a.instanceOf(Date)}).isRequired,conversationId:r.a.string,reactionsReply:r.a.shape({reactionIndex:r.a.number,reactionSet:r.a.array.isRequired}),onClose:r.a.func,onComposerClick:r.a.func,onReactionSelect:r.a.func,frameWindow:r.a.object,showUploadButton:r.a.bool,showGifButton:r.a.bool,showReplyToButton:r.a.bool},L.defaultProps={showUploadButton:!0,showGifButton:!0},L.contextTypes={addMetric:r.a.func.isRequired};var z={name:"fnfiys",styles:"right:0;left:0;margin:0 auto;"},U=Object(s.c)(x.a)("position:fixed;bottom:",Object(f.c)(),"px;right:",Object(s.f)("horizontalPadding"),"px;width:342px;z-index:",Object(f.d)(1),";box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);",function(e){var t=e.theme;return t.isLeftAlignment&&Object(s.b)("left:",t.horizontalPadding,"px;right:auto;")}," ",function(e){return e.theme.isMobileSize&&z});function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(r){var e,t;function n(){for(var n,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Y(G(n=r.call.apply(r,[this].concat(t))||this),"state",{height:0}),Y(G(n),"handleHeightChange",function(e){var t=e.height;n.setState({height:t})}),n}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var t=this,e=this.props,n=e.conversationId,o=e.appName,r=e.message,i=e.reactionsReply,a=e.showUploadButton,s=e.showGifButton,c=e.onComposerClick,l=e.onReactionSelect,p=e.showReplyToButton,u=e.onClose,d=this.state.height;return h.a.createElement(U,{style:{height:d},frameName:"intercom-note-frame"},function(e){return h.a.createElement("span",null,h.a.createElement(S.a,{id:"note-frame",key:"note-frame",onChange:t.handleHeightChange},h.a.createElement(L,{frameWindow:e,conversationId:n,appName:o,message:r,reactionsReply:i,showUploadButton:a,showGifButton:s,onClose:u,onComposerClick:c,onReactionSelect:l,showReplyToButton:p})),h.a.createElement(_.a,{appWindow:e}))})},n}(p.Component);function X(){return h.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"intercom-chat-bubble-icon"},h.a.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $(J(o=r.call.apply(r,[this].concat(t))||this),"node",void 0),$(J(o),"state",{isFooterVisible:!0,isScrolled:!1}),$(J(o),"footer",void 0),$(J(o),"handleScroll",function(e){var t=o.state.isFooterVisible,n=Object(H.k)(e.target);o.setState({isFooterVisible:t||n<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),$(J(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,n=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:n})}),$(J(o),"getBodyClassName",function(){return N()({"intercom-pointer-body":!0,"intercom-replies-disabled":o.isReplyDisabled()})}),$(J(o),"isReplyDisabled",function(){return"disabled"===o.props.message.replyType}),$(J(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,n=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:t,conversation_id:n})}),$(J(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return N()({"intercom-pointer":!0,"intercom-pointer-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return N()({"intercom-pointer-footer":!0,"intercom-pointer-footer-visible":this.state.isFooterVisible})},o.renderFooter=function(e){var t=this;return this.isReplyDisabled()?null:h.a.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},e?this.renderReactionPicker():this.renderChatComposer())},o.renderChatComposer=function(){var t=this;return h.a.createElement("div",{className:"intercom-pointer-composer",onClick:t.handleComposerClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},h.a.createElement("span",null,h.a.createElement(X,null)),h.a.createElement("span",{className:"intercom-composer-placeholder"},Object(u.c)("start_a_conversation")))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,n=e.onReactionSelect;return h.a.createElement(A.a,Q({},t,{onReactionSelect:n}))},o.render=function(){var t=this,e=this.props,n=e.appName,o=e.message,r=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=o.author,c=o.lastActiveAt,l=o.body;return h.a.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames()},h.a.createElement(B.a,{appName:n,isReplyStyle:!1,author:s,lastActiveAt:c},h.a.createElement("span",{className:"intercom-pointer-close",onClick:i,"aria-label":Object(u.c)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"},"Â "),h.a.createElement("div",{className:this.getBodyClassName()},h.a.createElement(P.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},h.a.createElement(M.a,{blocks:l,zoomable:!0,frameWindow:a}))),this.renderFooter(r)))},n}(p.Component);Z.contextTypes={addMetric:r.a.func.isRequired};var ee=n(896),te=Object(s.c)(x.a)("z-index:",Object(f.d)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);");function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oe(ne(o=r.call.apply(r,[this].concat(t))||this),"state",{width:0,height:0}),oe(ne(o),"handleDimensionFrameSize",function(e){var t=e.height,n=e.width;o.setState({width:n,height:t})}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.frameStyles=function(){var e=this.state;return{width:e.width,height:e.height,opacity:1}},o.render=function(){var e=this,t=this.props,n=t.appName,o=t.appWindow,r=t.message,i=t.conversationId,a=t.onClose,s=t.reactionsReply,c=t.onComposerClick,l=t.onReactionSelect;return h.a.createElement(ee.a,{appWindow:o,targetSelector:r.pointerSelector,childDimensions:this.frameStyles()},h.a.createElement(te,{style:this.frameStyles(),frameName:"intercom-pointer-frame"},function(){return h.a.createElement(S.a,{id:"pointer-frame",key:"pointer-frame",onChange:e.handleDimensionFrameSize},h.a.createElement(Z,{appName:n,message:r,conversationId:i,reactionsReply:s,frameWindow:o,onComposerClick:c,onReactionSelect:l,onClose:a}))}))},n}(p.PureComponent),ie=n(884),ae=n(43),se=n(895),ce=n(871),le=n(243),pe=n.n(le),ue=n(244),de=n.n(ue),he={name:"siiwv4",styles:"&:hover .story-dismiss-button{opacity:1;}"},me=s.c.div("z-index:",Object(f.d)(1),";font-size:13px;font-family:",Object(s.f)("fontSansSerif"),";color:",Object(s.f)("bodyText"),";position:relative;",function(e){var t=e.theme;return e.standalone&&Object(s.b)("position:fixed;bottom:",t.verticalPadding,"px;right:",t.horizontalPadding,"px;")}," ",function(e){return e.isVideoLoaded&&he}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&Object(s.b)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding,"px;")}),fe={name:"1c9b7w0",styles:"width:240px;height:180px;margin-left:10px;"},be={name:"dxx3wj",styles:"margin-top:42px;"},ve={name:"ajzub1",styles:"margin-top:54px;"},ge=s.c.div("position:relative;overflow:hidden;box-shadow:0px 2px 16px rgba(0,0,0,0.14),0px 1px 6px rgba(0,0,0,0.06);border-radius:5px;transition:transform 150ms ease,width 200ms ease,height 200ms ease,margin 200ms;transform-origin:bottom right;width:340px;height:255px;",function(e){return e.standalone&&ve}," ",function(e){var t=e.standalone,n=e.isExpanded;return t&&n&&be}," ",function(e){return e.theme.isMobileSize&&fe}),ye=s.c.div("position:absolute;top:0;right:0;display:block;opacity:0;transition:opacity 150ms ease;span{display:block;background-color:#5d6c80;opacity:0.8;color:",Object(s.f)("white"),";font-size:13px;height:32px;line-height:32px;padding:0 16px 0 16px;border-radius:16px;cursor:pointer;background-position:center;",Object(f.b)(pe.a,de.a,"8px","8px"),";&:hover{opacity:1;}}"),Ce=s.c.div("position:absolute;width:100%;z-index:",Object(f.d)(1),";top:0;left:0;right:0;bottom:0;cursor:pointer;"),Oe=s.c.div({name:"maq7xh",styles:".chat-composer{margin-top:10px;}&.video-composer-enter{.chat-composer{display:block;height:0;opacity:0;overflow:hidden;padding-top:0;padding-bottom:0;margin-top:0;}.composer-placeholder,.composer-buttons{opacity:0;transition:opacity 200ms ease;transition-delay:200ms;}}&.video-composer-enter-active{.chat-composer{opacity:1;height:52px;padding-top:17px;padding-bottom:17px;transition-property:height,opacity,padding,margin;transition-duration:200ms;transition-timing-function:ease;margin-top:10px;}.composer-placeholder,.composer-buttons{opacity:1;}}"}),we=s.c.div("position:relative;box-sizing:border-box;padding:17px 20px;margin-top:5px;width:100%;height:",Object(s.f)("chatComposerHeight"),"px;background-color:",Object(s.f)("inputBackground"),";border-radius:",Object(s.f)("notificationBorderRadius"),"px;border:none;font-size:14px;cursor:pointer;color:",Object(s.f)("grey"),";box-shadow:0 1px 6px rgba(0,0,0,0.06),0 2px 32px rgba(0,0,0,0.16);"),ke=s.c.span({name:"1rju6wc",styles:"display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;line-height:18px;"}),Ee=s.c.div({name:"1cp2t9f",styles:"position:absolute;top:0;right:18px;"}),Se={name:"pctu5d",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}"},xe=s.c.span(Se,";width:",18,"px;padding-left:",9,"px;padding-right:",9,"px;svg{height:18px;width:18px;}svg path{fill:",Object(s.f)("grey"),";}&:before{top:18px;}");function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Re(je(e=r.call.apply(r,[this].concat(n))||this),"video",void 0),Re(je(e),"state",{isExpanded:!1,isVideoLoaded:!1}),Re(je(e),"handleOverlayClick",function(){e.state.isVideoLoaded&&e.setState({isExpanded:!0})}),Re(je(e),"handleVideoLoaded",function(){e.setState({isVideoLoaded:!0})}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.renderDismissButton=function(){return this.props.standalone?h.a.createElement(ye,{className:"story-dismiss-button",onClick:this.props.onClose},h.a.createElement("span",null)):null},o.renderOverlay=function(){return this.state.isExpanded?null:h.a.createElement(Ce,{className:"story-overlay",onClick:this.handleOverlayClick})},o.renderComposer=function(){var e=this.props,t=e.part,n=e.onComposerOrFormInputClick,o=t.author.firstName;return h.a.createElement(ae.CSSTransition,{classNames:"video-composer",timeout:{enter:400,exit:400}},h.a.createElement(Oe,null,h.a.createElement(we,{className:"chat-composer",onClick:n,"aria-label":Object(u.c)("open_conversation_and_reply")},h.a.createElement(ke,{className:"composer-placeholder"},Object(u.c)("reply_to_name",{name:o})),h.a.createElement(Ee,{className:"composer-buttons"},h.a.createElement(xe,null,h.a.createElement(m.a,null)),h.a.createElement(xe,null,h.a.createElement(d.a,null))))))},o.renderQuickReplies=function(){var e=this.props.conversation;return e?h.a.createElement(ce.a,{conversation:e,isBorderless:!0}):null},o.renderResponseArea=function(){return this.state.isExpanded&&this.props.showResponseArea?(e=this.props.part)&&e.replyOptions&&0<e.replyOptions.length?this.renderQuickReplies():this.renderComposer():null;var e},o.render=function(){var e=this.props,t=e.part.body,n=e.autoPlay,o=e.standalone,r=this.state,i=r.isExpanded,a=r.isVideoLoaded,s=t[0],c=s.url,l=s.captions,p=s.thumbnailUrl;return h.a.createElement(me,{standalone:o,isVideoLoaded:a},this.renderDismissButton(),h.a.createElement(ge,{standalone:o,isExpanded:i},this.renderOverlay(),h.a.createElement(se.a,{srcUrl:c,autoPlay:n,onVideoLoaded:this.handleVideoLoaded,captions:l,thumbnailUrl:p})),h.a.createElement(ae.TransitionGroup,null,this.renderResponseArea()))},n}(p.Component);Re(_e,"defaultProps",{standalone:!1,onClose:function(){},showResponseArea:!0,autoPlay:!1});var Te=Object(s.c)(x.a)("z-index:",Object(f.d)()," !important;position:fixed !important;right:0;bottom:0;width:100vw;height:100vh;");function Ie(e){var t=e.conversation,n=e.standalone,o=e.part,r=e.onClose,i=e.onComposerOrFormInputClick;return h.a.createElement(Te,{frameName:"intercom-story-frame"},function(e){return h.a.createElement(h.a.Fragment,null,h.a.createElement(_e,{conversation:t,standalone:n,part:o,onClose:r,onComposerOrFormInputClick:i}),h.a.createElement(_.a,{appWindow:e}))})}var Ne=n(23),Pe=n(16),Me=n(892),Be=n(894),Ae=n(20);function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return De(Fe(t=r.call.apply(r,[this].concat(n))||this),"ref",void 0),De(Fe(t),"setRef",function(e){t.ref=e}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){Object(Ae.o)(this.props.conversation)&&this.handleShow()},o.componentDidUpdate=function(e){!Object(Ae.o)(e.conversation)&&Object(Ae.o)(this.props.conversation)?this.handleShow():Object(Ae.o)(e.conversation)&&!Object(Ae.o)(this.props.conversation)&&this.handleHide()},o.handleShow=function(){this.props.onShow(this.getHeight())},o.handleHide=function(){this.props.onHide()},o.getHeight=function(){return this.ref?this.ref.clientHeight:0},o.render=function(){return Object(Ae.o)(this.props.conversation)?h.a.createElement("div",{ref:this.setRef,className:"intercom-borderless-conversation-composer"},h.a.createElement(Be.a,He({isBorderless:!0},this.props))):null},n}(p.PureComponent),Ve=n(887);function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Le(qe(e=r.call.apply(r,[this].concat(n))||this),"isPartBeingAddedTimeout",void 0),Le(qe(e),"borderlessBodyNode",void 0),Le(qe(e),"visibleScrollbarsInOs",0!==function(){var e=window.parent.document,t=e.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",e.body.appendChild(t);var n=t.offsetWidth;t.style.overflow="scroll";var o=e.createElement("div");o.style.width="100%",t.appendChild(o);var r=o.offsetWidth;return t.parentNode.removeChild(t),n-r}()),Le(qe(e),"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:e.props.frameNode.offsetTop,adminWasTyping:!1}),Le(qe(e),"recalculateOffsets",function(){e.setState({frameOffsetTop:e.props.frameNode.offsetTop},function(){return Object(H.y)(e.borderlessBodyNode)})}),Le(qe(e),"handleScroll",function(){e.state.isPartBeingAdded||e.setState({bottomScrollOffset:Object(H.e)(e.borderlessBodyNode)})}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){Object(H.c)(window.parent,"resize",this.recalculateOffsets)},o.componentDidUpdate=function(e){var t=this,n=this.state.frameOffsetTop,o=this.props,r=o.conversation,i=o.frameNode,a=e.conversation,s=r.parts.length!==a.parts.length,c=Object(Ve.h)(r);(s||c&&!this.state.adminWasTyping)&&(Object(H.y)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(function(){t.setState({isPartBeingAdded:!1}),Object(H.y)(t.borderlessBodyNode)},300)),i.offsetTop!==n&&this.setState({frameOffsetTop:i.offsetTop},function(){t.setState({bottomScrollOffset:Object(H.e)(t.borderlessBodyNode)})}),c!==this.state.adminWasTyping&&this.setState({adminWasTyping:c})},o.componentWillUnmount=function(){clearTimeout(this.isPartBeingAddedTimeout),Object(H.x)(window.parent,"resize",this.recalculateOffsets)},o.getStyle=function(){var e=this.props,t=e.borderlessNode,n=e.composerHeight,o=t&&t.clientHeight,r=this.state.frameOffsetTop;if(o&&!r){var i=o/100,a=100-10/i,s="linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) "+(100-76/i)+"%, rgba(0, 0, 0, "+Math.max(1-this.state.bottomScrollOffset/100*5,0)+") "+a+"%)";return{maxHeight:o-n-Qe+"px",WebkitMaskImage:s,MaskImage:s}}},o.getClassName=function(){return N()({"intercom-borderless-conversation-body":!0,"intercom-borderless-conversation-body-enable-scroll":0===this.state.frameOffsetTop,"intercom-borderless-conversation-body-visible-scrollbars":this.visibleScrollbarsInOs})},o.render=function(){var t=this;return h.a.createElement("div",{className:this.getClassName(),style:this.getStyle(),ref:function(e){return t.borderlessBodyNode=e},onScroll:this.handleScroll},this.props.children())},n}(p.Component),Ue=n(901),Ge=n(506),Ye=n(514);function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=20,Je=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xe(Ke(o=r.call.apply(r,[this].concat(t))||this),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,isHeaderVisible:!1,headerHeight:50,partsHeight:0,quickRepliesHeight:0,composerHeight:0,replyToButtonHeight:0}),Xe(Ke(o),"handlePartsHeightChange",function(e){o.setState({partsHeight:e},o.handleHeightChange)}),Xe(Ke(o),"handleQuickRepliesShow",function(e){o.setState({quickRepliesHeight:e},o.handleHeightChange)}),Xe(Ke(o),"handleQuickRepliesHide",function(){o.setState({quickRepliesHeight:0},o.handleHeightChange)}),Xe(Ke(o),"handleComposerShow",function(e){o.setState({composerHeight:e},o.handleHeightChange)}),Xe(Ke(o),"handleComposerHide",function(){o.setState({composerHeight:0},o.handleHeightChange)}),Xe(Ke(o),"handleReplyToButtonShow",function(e){o.setState({replyToButtonHeight:e},o.handleHeightChange)}),Xe(Ke(o),"handleClick",function(){var e=o.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen;t?o.setState({isEmojiPickerOpen:!1}):n&&o.setState({isGifPickerOpen:!1})}),Xe(Ke(o),"handleDismissClick",function(e){e.stopPropagation(),o.addCloseMetric(),o.props.onClose();var t=Object(Ye.a)();t&&t.focus()}),Xe(Ke(o),"handleEmojiPickerToggle",function(){var e=!o.state.isEmojiPickerOpen;o.setState({isEmojiPickerOpen:e}),o.props.onPopoverToggle(e)}),Xe(Ke(o),"handleGifPickerToggle",function(){var e=!o.state.isGifPickerOpen;o.setState({isGifPickerOpen:e}),o.props.onPopoverToggle(e)}),Xe(Ke(o),"handleMouseEnter",function(){o.setState({isHeaderVisible:!0})}),Xe(Ke(o),"handleMouseLeave",function(){o.setState({isHeaderVisible:!1})}),Xe(Ke(o),"handleViewMoreClick",function(){o.addViewMoreMetric(),o.props.onViewMore()}),Xe(Ke(o),"handleHeightChange",function(){o.props.onHeightChange(o.getHeight())}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.props.onOpen(),this.focusTrap=new Ge.a({document:this.props.frameWindow.document})},o.componentDidUpdate=function(e){var t=this.props.conversation;"all"===t.fetchState&&Object(Ae.a)(t)>Object(Ae.a)(e.conversation)&&this.addReplyMetric(t)},o.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},o.getHeight=function(){var e=this.state;return e.headerHeight+e.partsHeight+e.composerHeight+e.quickRepliesHeight+e.replyToButtonHeight+Qe},o.getStyle=function(){return{height:this.getHeight()}},o.getHeaderClassName=function(){return N()({"intercom-borderless-header":!0,"intercom-borderless-header-visible":this.state.isHeaderVisible})},o.getClassName=function(){return N()({"intercom-borderless":!0,"intercom-borderless-left-aligned":"left"===this.props.alignment,"intercom-borderless-has-composer":this.hasComposer()})},o.hasComposer=function(){var e=this.props.conversation,t=e.parts,n=e.composerState;return"attribute_collector"===t[0].replyType||n.visible},o.shouldRenderHeader=function(){var e=this.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen;return!(t||n)},o.addViewMoreMetric=function(){this.context.addMetric("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})},o.addReplyMetric=function(){var e=this.props.conversation,t=Object(Ae.d)(e);this.context.addMetric("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})},o.addCloseMetric=function(){this.context.addMetric("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})},o.renderHeader=function(){var t=this;return h.a.createElement("div",{className:this.getHeaderClassName()},h.a.createElement("div",{className:"intercom-borderless-button-wrapper"},this.props.hasHistory?this.renderViewMoreButton():null,h.a.createElement("div",{className:"intercom-borderless-dismiss-button",onClick:t.handleDismissClick,"aria-label":Object(u.c)("dismiss"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},h.a.createElement("span",null))))},o.renderViewMoreButton=function(){var t=this;return h.a.createElement("div",{className:"intercom-borderless-view-more-button",onClick:t.handleViewMoreClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleViewMoreClick(e)},role:"button",tabIndex:"0"},h.a.createElement("span",null,Object(u.c)("view_more")))},o.renderParts=function(){var e=this.props,t=e.appName,n=e.userRole,o=e.conversation,r=e.onArticleCardClick,i=e.onReactionSelect,a=e.onRetry,s=e.frameWindow,c=this.state,l=c.isEmojiPickerOpen,p=c.isGifPickerOpen;return h.a.createElement(Me.a,{isBorderless:!0,isFaded:l||p,maxHeight:0,appName:t,userRole:n,conversation:o,frameWindow:s,onArticleCardClick:r,onHeightChange:this.handlePartsHeightChange,onReactionSelect:i,onRetry:a})},o.renderQuickReplies=function(){return h.a.createElement(ce.a,{conversation:this.props.conversation,onShow:this.handleQuickRepliesShow,onHide:this.handleQuickRepliesHide,isBorderless:!0})},o.renderFooter=function(){var e=this.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen,o=this.props,r=o.showReplyToButton,i=o.onComposerClick,a=o.conversation,s=o.frameWindow;return r&&Object(Ae.o)(this.props.conversation)?h.a.createElement(D.a,{onShow:this.handleReplyToButtonShow,onClick:i}):h.a.createElement(We,{conversation:a,showEmojiPicker:t,showGifPicker:n,onShow:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:s})},o.render=function(){var t=this,e=this.props,n=e.conversation,o=e.frameNode,r=this.state.composerHeight;return h.a.createElement("div",{className:this.getClassName(),style:this.getStyle(),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:"-1",role:"region",ref:function(e){return t.borderlessNode=e}},this.shouldRenderHeader()?this.renderHeader():null,h.a.createElement("div",{className:"intercom-borderless-body"},h.a.createElement(ze,{conversation:n,composerHeight:r,borderlessNode:this.borderlessNode,frameNode:o},function(){return h.a.createElement("div",{className:"intercom-borderless-conversation-body-inner"},t.renderParts(),t.renderQuickReplies())}),this.renderFooter()),h.a.createElement(_.a,{appWindow:this.props.frameWindow}))},n}(p.Component);Je.propTypes={conversation:r.a.shape({id:r.a.string.isRequired,fetchState:r.a.oneOf(["summary","partial","all"]),parts:r.a.arrayOf(r.a.shape({id:r.a.string,replyType:r.a.oneOf(["text","attribute_collector"])})).isRequired,composerState:r.a.shape({visible:r.a.bool.isRequired}).isRequired}),appName:r.a.string.isRequired,userRole:r.a.string.isRequired,hasHistory:r.a.bool,alignment:r.a.string,onOpen:r.a.func.isRequired,onHeightChange:r.a.func.isRequired,onPopoverToggle:r.a.func.isRequired,onArticleCardClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,onRetry:r.a.func.isRequired,onViewMore:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func.isRequired,frameWindow:r.a.any.isRequired,showReplyToButton:r.a.bool,part:r.a.object,frameNode:r.a.object.isRequired},Je.contextTypes={addMetric:r.a.func};var $e=Object(Ue.a)(Je),Ze=n(65),et=n(867);var tt=n(501),nt=n(73),ot=Object(Ne.b)(function(e,t){var n=e.app.name,o=e.user.role,r=t.part,i=t.conversation,a=Object(tt.a)(e).alignment,s=i.parts.filter(function(e){return e.createdAt>=r.createdAt}),c=s[0].messageType;c=c||"adminReply",s[0]=Object.assign({},s[0],{messageType:c});var l=s.length<i.parts.length;return{appName:n,userRole:o,conversation:Object.assign({},i,{parts:s}),hasHistory:l,alignment:a}},function(n){return{onOpen:function(e){n({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})},onRetry:function(e,t){n(Object(nt.j)(Pe.a,e,t,!0))},onReactionSelect:function(e,t){n(Object(nt.k)(Pe.a,e,t,!1))},onArticleCardClick:function(e,t){n(Object(et.c)(Pe.a,e,t))},onViewMore:function(e,t){n(Object(Ze.f)(e,"viewmore_borderless",t))}}},function(e,t,n){var o=e.conversation,r=o.id,i=o.lastParticipatingAdmin,a={onOpen:function(){t.onOpen(r)},onReactionSelect:function(e){t.onReactionSelect(r,e)},onRetry:function(e){t.onRetry(r,e)},onViewMore:function(){t.onViewMore(r,i)},conversation:o};return Object.assign({},e,t,n,a)})($e),rt={name:"n7pinj",styles:"min-height:350px;"},it=Object(s.c)(x.a)("z-index:",Object(f.d)()," !important;position:fixed !important;width:360px !important;",function(e){var t=e.theme;return Object(s.b)("bottom:",t.verticalPadding-t.borderlessIframePadding,"px;right:",t.horizontalPadding-t.borderlessIframePadding,"px;max-height:calc(100% - ",t.verticalPadding-t.borderlessIframePadding,"px);")}," ",function(e){return e.isPopoverOpen&&rt}," ",function(e){var t=e.theme;return t.isLeftAlign&&Object(s.b)("left:",t.borderlessIframePadding+t.horizontalPadding-t.borderlessIframePaddingLeft+t.borderlessAvatarOffsetWidth,"px;right:auto;")}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&Object(s.b)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px;max-height:calc( 100% - ",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px );")});function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return st(at(t=r.call.apply(r,[this].concat(n))||this),"state",{height:0,isPopoverOpen:!1}),st(at(t),"handleHeightChange",function(e){t.setState({height:e})}),st(at(t),"handlePopoverToggle",function(e){t.setState({isPopoverOpen:e})}),t}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var n=this,e=this.props,o=e.conversation,r=e.part,i=e.onClose,a=e.onComposerClick,s=e.showReplyToButton,t=this.state,c=t.isPopoverOpen,l=t.height;return h.a.createElement(it,{style:{height:l},className:"intercom-borderless-frame",frameName:"intercom-borderless-frame",isPopoverOpen:c},function(e,t){return h.a.createElement(ot,{conversation:o,part:r,frameWindow:e,onClose:i,onHeightChange:n.handleHeightChange,onPopoverToggle:n.handlePopoverToggle,onComposerClick:a,showReplyToButton:s,frameNode:t})})},n}(p.Component);function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ct.propTypes={conversation:r.a.object.isRequired,part:r.a.object.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func,showReplyToButton:r.a.bool},n.d(t,"a",function(){return ut});var ut=function(o){var e,t;function n(){for(var a,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pt(lt(a=o.call.apply(o,[this].concat(t))||this),"addMessageMetric",function(e){var t=a.props,n=t.conversation,o=t.part,r=o.id,i=o.messageType;a.context.addMetric(e,"message","in_app","from_full",{conversation_id:n.id,message_id:r,message_type:i})}),pt(lt(a),"handleDismissClick",function(){a.addMessageMetric("closed"),a.props.onClose()}),a}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.conversation,n=e.userIsPresent,o=e.onOpen,r=e.onConversationRead;o(),!t.read&&n&&r(),this.addMessageMetric("received")},r.componentDidUpdate=function(){var e=this.props,t=e.userIsPresent,n=e.conversation;t&&!n.read&&this.props.onConversationRead()},r.render=function(){var e=this.props,t=e.appWindow,n=e.conversation,o=e.part,r=e.appName,i=e.isMobile,a=e.onComposerOrFormInputClick,s=e.onReactionSelect,c=e.showUploadButton,l=e.showGifButton,p=e.shouldShowUpfrontEmailComposer,u=o.messageType,d=o.reactionsReply;switch(u){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return i?h.a.createElement(T,{appName:r,part:o,onClose:this.handleDismissClick,composerState:n.composerState,onComposerOrFormInputClick:a}):h.a.createElement(ct,{conversation:n,part:o,onClose:this.handleDismissClick,showReplyToButton:p,onComposerClick:a});case"video":return h.a.createElement(Ie,{conversation:n,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:a});case"note":return h.a.createElement(K,{conversationId:n.id,appName:r,message:o,reactionsReply:d,showUploadButton:c,showGifButton:l,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:p});case"post":return h.a.createElement(ie.a,{conversationId:n.id,appName:r,message:o,reactionsReply:d,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:p});case"pointer":return h.a.createElement(re,{appWindow:t,appName:r,message:o,conversationId:n.id,reactionsReply:d,onComposerClick:a,onReactionSelect:s,onClose:this.handleDismissClick})}},n}(p.Component);ut.propTypes={appWindow:r.a.object,conversation:r.a.shape({read:r.a.bool.isRequired}).isRequired,part:r.a.shape({messageType:r.a.string}).isRequired,appName:r.a.string.isRequired,isMobile:r.a.bool.isRequired,userIsPresent:r.a.bool.isRequired,onConversationRead:r.a.func.isRequired,onOpen:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerOrFormInputClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,showUploadButton:r.a.bool,showGifButton:r.a.bool,shouldShowUpfrontEmailComposer:r.a.bool},ut.contextTypes={addMetric:r.a.func}},896:function(e,t,n){"use strict";var o=n(164),c=n.n(o),r=n(171),i=n.n(r),a=n(0),u=n.n(a),s=n(924),l=n(71),p=n.n(l);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return h(d(e=r.call.apply(r,[this].concat(n))||this),"document",e.props.appWindow.document),h(d(e),"state",{container:null}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){var e=this.props.appWindow,t=e.document.querySelector("#intercom-container");if(e.document.body){var n=e.document.createElement("div");n.id="intercom-positioner-tree",n.classList.add("intercom-namespace"),n.style.cssText="position: initial; !important; z-index: 2147483647 !important;",t.insertAdjacentElement("beforeBegin",n),this.setState({container:n})}},o.componentWillUnmount=function(){var e=this.state.container;if(e){var t=e.parentNode;t&&t.removeChild(e)}},o.render=function(){return this.state.container?p.a.createPortal(this.props.children,this.state.container):null},n}(a.Component),f=n(13),b=function(f){if(!f.IntercomIntersectionObserver){var b=f.document;if("IntersectionObserver"in f&&"IntersectionObserverEntry"in f&&"intersectionRatio"in f.IntersectionObserverEntry.prototype&&"isIntersecting"in f.IntersectionObserverEntry.prototype)return f.IntercomIntersectionObserver=f.IntersectionObserver,f.IntercomIntersectionObserverEntry=f.IntersectionObserverEntry,!0;var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(f,"resize",this._checkForIntersections,!0),n(b,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in f&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(b,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(f,"resize",this._checkForIntersections,!0),o(b,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),c=s?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,n=v(t),o=this._rootContainsTarget(t),r=e.entry,i=s&&o&&this._computeTargetAndRootIntersection(t,c),a=e.entry=new l({time:f.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:c,intersectionRect:i});r?s&&o?this._hasCrossedThreshold(r,a)&&this._queuedEntries.push(a):r&&r.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=f.getComputedStyle(e).display){for(var n,o,r,i,a,s,c,l,p=v(e),u=g(e),d=!1;!d;){var h=null,m=1==u.nodeType?f.getComputedStyle(u):{};if("none"==m.display)return;if(u==this.root||u==b?(d=!0,h=t):u!=b.body&&u!=b.documentElement&&"visible"!=m.overflow&&(h=v(u)),h&&(n=h,o=p,void 0,r=Math.max(n.top,o.top),i=Math.min(n.bottom,o.bottom),a=Math.max(n.left,o.left),s=Math.min(n.right,o.right),l=i-r,!(p=0<=(c=s-a)&&0<=l&&{top:r,bottom:i,left:a,right:s,width:c,height:l})))break;u=g(u)}return p}},e.prototype._getRootRect=function(){var e;if(this.root)e=v(this.root);else{var t=b.documentElement,n=b.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||r(b,this.root)},e.prototype._rootContainsTarget=function(e){return r(this.root||b,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},f.IntercomIntersectionObserver=e,f.IntercomIntersectionObserverEntry=f.IntersectionObserverEntry}function l(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function e(e,t){var n,o,r,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout(function(){n(),r=null},o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,o){"function"==typeof e.addEventListener?e.addEventListener(t,n,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function v(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(e,t){for(var n=t;n;){if(n==e)return!0;n=g(n)}return!1}function g(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}},v=function(e){var c=e,l=e.document,t=c.HTMLElement||c.Element,a=800,p={scroll:c.scroll||c.scrollTo,scrollBy:c.scrollBy||c.intercomScrollBy,elementScroll:d,intercomScrollIntoView:t.prototype.intercomScrollIntoView},u=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now;var n,o=(n=c.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);function d(e,t){this.scrollLeft=e,this.scrollTop=t}function r(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function s(e,t){var n=c.getComputedStyle(e,null)["overflow"+t];return"auto"===n||"scroll"===n}function h(e){var t,n,o,r,i=(u()-e.startTime)/a;r=i=1<i?1:i,t=.5*(1-Math.cos(Math.PI*r)),n=e.startX+(e.x-e.startX)*t,o=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,n,o),n===e.x&&o===e.y||c.requestAnimationFrame(h.bind(c,e))}function m(e,t,n){var o,r,i,a,s=u();a=e===l.body?(r=(o=c).scrollX||c.pageXOffset,i=c.scrollY||c.pageYOffset,p.scroll):(r=(o=e).scrollLeft,i=e.scrollTop,d),h({scrollable:o,method:a,startTime:s,startX:r,startY:i,x:t,y:n})}c.intercomScrollBy=function(){void 0!==arguments[0]&&(r(arguments[0])?p.scrollBy.call(c,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(c,l.body,~~arguments[0].left+(c.scrollX||c.pageXOffset),~~arguments[0].top+(c.scrollY||c.pageYOffset)))},t.prototype.intercomScrollIntoView=function(){if(!0!==r(arguments[0])){var e=function(e){for(var t,n,o;!1==((e=e.parentNode)===l.body)&&!1===(n=i(t=e,"Y")&&s(t,"Y"),o=i(t,"X")&&s(t,"X"),n||o););return e}(this),t=e.getBoundingClientRect(),n=this.getBoundingClientRect();e!==l.body?(m.call(this,e,e.scrollLeft+n.left-t.left,e.scrollTop+n.top-t.top),"fixed"!==c.getComputedStyle(e).position&&c.intercomScrollBy({left:t.left,top:t.top,behavior:"smooth"})):c.intercomScrollBy({left:n.left,top:n.top,behavior:"smooth"})}else p.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}},C=n(925),g=function(e,t){var n,o=t.element,r=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,c=-1!==["left","right"].indexOf(r),l=c?"height":"width",p=c?"Top":"Left",u=p.toLowerCase(),d=c?"left":"top",h=c?"bottom":"right",m=Object(C.getOuterSizes)(o)[l];s[h]-m<a[u]&&(e.offsets.popper[u]-=a[u]-(s[h]-m)),s[u]+m>a[h]&&(e.offsets.popper[u]+=s[u]+m-a[h]),e.offsets.popper=Object(C.getClientRect)(e.offsets.popper);var f=s[u]+s[l]/2-m/2,b=Object(C.getStyleComputedProperty)(e.instance.popper),v=parseFloat(b["margin"+p]),g=parseFloat(b["border"+p+"Width"]),y=f-e.offsets.popper[u]-v-g;return y=Math.max(Math.min(a[l]-m-18,y),0),e.arrowElement=o,e.offsets.arrow=((n={})[u]=Math.round(y),n[d]="",n),e},y=n(5),O=n(233),w=n(123),k=Object(y.d)("0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);position:initial;}"),E=Object(y.d)("0%{opacity:0;transform:translateY(-20px);}100%{opacity:1;transform:translateY(0);}"),S=Object(y.d)("0%{opacity:0;transform:translateX(-20px);}100%{opacity:1;transform:translateY(0);}"),x=Object(y.d)("0%{opacity:0;transform:translateX(20px);}100%{opacity:1;transform:translateY(0);}"),j=y.c.div("transition:opacity 0.6s ease;.intercom-positioner-animation-wrapper{animation:",k," 800ms ease;}z-index:",Object(w.d)(1),";&[x-placement^='top']{.intercom-positioner-arrow-wrapper{bottom:-9px;transform:translateY(20px);}.intercom-positioner-animation-wrapper{animation:",E," 800ms ease;}}&[x-placement^='right']{.intercom-positioner-arrow-wrapper{transform:translateX(-20px);}.intercom-positioner-animation-wrapper{animation:",x," 800ms ease;}}&[x-placement^='bottom']{.intercom-positioner-arrow-wrapper{transform:translateY(-20px);}.intercom-positioner-animation-wrapper{animation:",k," 800ms ease;}}&[x-placement^='left']{.intercom-positioner-arrow-wrapper{right:-9px;transform:translateX(20px);}.intercom-positioner-animation-wrapper{animation:",S," 800ms ease;}}"),R={name:"41q668",styles:"transform:scale(1);"},_=function(e,t){return Object(y.d)("0%{",R,"}85%{",(n=e,o=t,Object(y.b)("transform:scaleX(calc(1 + (4 / ",n,"))) scaleY(calc(1 + (4 / ",o,")));")),"}100%{",R,"}");var n,o},T={name:"1qu4hyo",styles:"display:block;position:fixed;top:50%;left:50%;box-shadow:0px 0px 0px 4000px rgba(0,0,0,0.35);"},I=y.c.div("z-index:",Object(w.d)(),";content:'';display:none;position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;border-radius:1px;",function(e){var t=e.isAnimating,n=e.width,o=e.height;return t&&Object(y.b)("animation:",_(n,o)," 2s infinite;")}," ",function(e){return e.isPost&&T}," ",function(e){var t=e.isStep,n=e.theme;return t&&Object(y.b)("display:block;box-shadow:0 0 0 3px ",n.appColor,",0px 0px 0px 4000px rgba(0,0,0,0.35);")}),N=y.c.div({name:"1isip6o",styles:"position:absolute;pointer-events:none;"}),P=Object(y.c)(O.a)({name:"1cs7hh",styles:"height:38px;width:38px;pointer-events:none;"}),M=y.c.div(function(e){var t=e.scrollable,n=e.theme;return t&&Object(y.b)("position:fixed;height:100%;width:100%;top:0;left:0;opacity:0;box-sizing:border-box;z-index:",Object(w.d)(0,n),";")});var B=function(s){var e,t;function n(){for(var e,t,n,o,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=s.call.apply(s,[this].concat(i))||this,t=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),o=void 0,(n="eventBlockerRef")in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,e}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.stopBubbling=function(e){e.stopPropagation()},o.componentDidMount=function(){var t=this;this.eventBlockerRef&&this.props.events.forEach(function(e){Object(f.c)(t.eventBlockerRef,e,t.stopBubbling)})},o.componentWillUnmount=function(){var t=this;this.eventBlockerRef&&this.props.events.forEach(function(e){Object(f.x)(t.eventBlockerRef,e,t.stopBubbling)})},o.render=function(){var t=this;return u.a.createElement("div",{className:"event-blocker",ref:function(e){return t.eventBlockerRef=e}},this.props.children)},n}(a.Component);function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){F(t,e,n[e])})}return t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return D});var D=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return F(H(o=r.call.apply(r,[this].concat(t))||this),"arrow",void 0),F(H(o),"node",void 0),F(H(o),"arrowContainer",void 0),F(H(o),"positioner",void 0),F(H(o),"IntersectionObserver",void 0),F(H(o),"missingSelectorTimeout",void 0),F(H(o),"scrollIntoViewTimeout",void 0),F(H(o),"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,positionerOffsetForMask:{left:0,top:0},placement:null}),F(H(o),"targetWithClickHandler",null),F(H(o),"updateElementPosition",function(e){var t=e.styles,n=e.arrowStyles;return o.setState({styles:t,hide:!o.targetIsVisible(),arrowStyles:n}),e.attributes&&o.applyAttributes(e.attributes),e}),F(H(o),"handleOverlayClick",function(){o.scrollIntoView(),o.props.onOverlayClick&&o.props.onOverlayClick()}),F(H(o),"handleTargetClick",function(){o.props.onTargetClick&&o.props.onTargetClick()}),F(H(o),"handlePlacementChange",function(){o.props.onPlacementChange&&o.state.placement&&o.props.onPlacementChange(o.state.placement)}),F(H(o),"renderOverlay",function(){var e=o.getTargetNode();return o.props.renderOverlay(o.handleOverlayClick,o.props,e)}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.initializeIntersectionObserver(),this.initializePositioner(),this.setupTargetClickHandler()},o.shouldComponentUpdate=function(e,t){return!i()(this.props,e)||!i()(this.state,t)},o.componentDidUpdate=function(e,t){e.targetSelector!==this.props.targetSelector?(this.reinitializeIntersectionObserver(),this.reinitializePointer(),this.setupTargetClickHandler()):this.positioner?this.positioner.scheduleUpdate():this.initializePositioner(),t.placement!==this.state.placement&&this.handlePlacementChange()},o.componentWillUnmount=function(){var e,t,n=this.props.appWindow;this.destroyIntersectionObserver(),this.destroyPositioner(),this.destroyTargetClickHandler(),(e=n).IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry),((t=n).HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy,this.missingSelectorTimeout&&clearTimeout(this.missingSelectorTimeout),this.scrollIntoViewTimeout&&clearTimeout(this.scrollIntoViewTimeout)},o.getTargetNode=function(){var e=this.props,t=e.targetSelector,n=e.appWindow;try{return n.document.querySelector(t)}catch(e){return null}},o.setupTargetClickHandler=function(){this.destroyTargetClickHandler(),this.targetWithClickHandler=this.getTargetNode(),this.targetWithClickHandler&&Object(f.c)(this.targetWithClickHandler,"click",this.handleTargetClick)},o.destroyTargetClickHandler=function(){this.targetWithClickHandler&&Object(f.x)(this.targetWithClickHandler,"click",this.handleTargetClick)},o.storeMaskOffsetsBasedOnFlipPosition=function(e){if(this.props.scrollable){var t=e["x-placement"];switch(t){case"bottom":this.setState({placement:t,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:t,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:t,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:t,positionerOffsetForMask:{left:3,top:0}});break;default:return}}},o.applyAttributes=function(n){var e=this;[this.arrowContainer,this.node].forEach(function(t){t&&"function"==typeof t.querySelectorAll&&Object.keys(n).forEach(function(e){t&&t.setAttribute&&t.setAttribute(e,n[e])}),e.storeMaskOffsetsBasedOnFlipPosition(n)})},o.targetIsVisible=function(){if(!this.state.nodeInViewPort)return!1;var e=this.getTargetNode();return Object(f.t)(e)},o.scrollIntoView=function(){var t=this,e=this.props.appWindow;v(e);var n=this.getTargetNode();this.scrollIntoViewTimeout=setTimeout(function(){var e=t.state.nodeInViewPort;n&&!e&&n.intercomScrollIntoView({behavior:"smooth",block:"center",inline:"center"})},200)},o.initializePositioner=function(){var e=this.props.scrollable,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new s.a(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:g},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))},o.initializeIntersectionObserver=function(){var a=this,e=this.props.appWindow,s=this.getTargetNode();s&&(e.IntercomIntersectionObserver||b(e),this.IntersectionObserver=new e.IntercomIntersectionObserver(function(e){if(0!==e.length){var t=c()(e,["time"],["desc"])[0],n=t.isIntersecting,o=t.intersectionRatio,r=n&&.5<=o,i=r&&Object(f.t)(s);a.setState({hide:!i,nodeInViewPort:r})}},{threshold:.5}),this.IntersectionObserver.observe(s))},o.destroyPositioner=function(){this.positioner&&this.positioner.destroy()},o.destroyIntersectionObserver=function(){this.IntersectionObserver&&this.IntersectionObserver.disconnect()},o.reinitializePointer=function(){this.destroyPositioner(),this.initializePositioner()},o.reinitializeIntersectionObserver=function(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()},o.mergedStyles=function(){var e=this.props.scrollable,t=this.state,n=t.styles,o=t.positionerOffsetForMask;if(!n)return{};if(!e)return n;var r=o.left,i=o.top;return A({},n,{left:n.left+r,top:n.top+i})},o.nodeIsVisible=function(){var e=this.getTargetNode();return e&&Object(f.t)(e)},o.getStyles=function(){var e=this.props.hideArrow,t=this.props.childDimensions||{},n=t.height,o=t.width,r=t.opacity,i=e?5:15;if(this.nodeIsVisible()){var a=!this.state.hide&&n&&o&&r?1:0;return this.onSelectorMatch(),A({},this.mergedStyles(),{opacity:a,margin:i})}if(this.props.renderFallback){var s=(this.props.childDimensions||{}).opacity;return this.onMissingSelector(),{position:"fixed",top:"calc(50% - "+(n||0)/2+"px)",left:"calc(50% - "+(o||0)/2+"px)",opacity:s,margin:i}}},o.getArrowStyles=function(){var e=this.state,t=e.arrowStyles,n=e.hide,o=this.props.childDimensions||{},r=o.height,i=o.width,a=!n&&r&&i?1:0;return t?{top:t.top,left:t.left,opacity:a}:{opacity:a}},o.getMaskStyles=function(){var e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{};var t=e.getBoundingClientRect(),n=t.top,o=t.left,r=t.width,i=t.height,a=this.props.appWindow;return{padding:3,top:n-3+a.pageYOffset,left:o-3+a.pageXOffset,width:r,height:i}},o.renderArrow=function(){var t=this;return u.a.createElement(N,{className:"intercom-positioner-arrow-wrapper",style:A({},this.getArrowStyles()),ref:function(e){return t.arrow=e}},u.a.createElement(P,{frameName:"intercom-positioner-arrow-frame",className:"intercom-positioner-arrow-frame"},function(){return u.a.createElement("div",{className:"intercom-positioner-arrow",style:{display:t.props.hideArrow?"none":"block"},ref:function(e){return t.arrowContainer=e}})}))},o.onMissingSelector=function(){var e=this;this.missingSelectorTimeout=setTimeout(function(){!e.nodeIsVisible()&&e.props.onMissingSelector&&e.props.onMissingSelector()},300)},o.onSelectorMatch=function(){this.props.onSelectorMatch&&this.props.onSelectorMatch()},o.render=function(){var t=this,e=this.props,n=e.scrollable,o=e.shouldAnimate,r=e.renderFallback,i=e.children,a=e.appWindow,s=this.getTargetNode();if(!s&&!r)return null;var c=this.getMaskStyles(),l=c.width,p=c.height;return u.a.createElement(m,{appWindow:a},u.a.createElement(u.a.Fragment,null,u.a.createElement(j,{ref:function(e){return t.node=e},className:"intercom-positioner-wrapper",style:this.getStyles()},u.a.createElement("div",{className:"intercom-positioner-animation-wrapper"},this.nodeIsVisible()?this.renderArrow():null,this.targetIsVisible()||r?i:null)),u.a.createElement(I,{className:"intercom-positioner-mask",style:c,isStep:n&&!!s,isPost:n&&!s,isAnimating:o,height:p,width:l}),u.a.createElement(B,{events:["auxclick","click","dblclick","mousedown","mouseup"]},this.renderOverlay())))},n}(a.Component);F(D,"defaultProps",{hideArrow:!1,renderFallback:!1,shouldAnimate:!1,renderOverlay:function(e,t){var n=t.scrollable;return u.a.createElement(M,{onClick:e,scrollable:n,tabIndex:"-1"})}})},941:function(e,t,n){"use strict";n.r(t);var o=n(23),c=n(134),r=n(229),i=n(2),a=n.n(i),_=n(0),T=n.n(_),s=n(11),I=n.n(s),h=n(842),m=n(851),N=n(15),f=n(847),P=n(761);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return p(l(e=r.call.apply(r,[this].concat(n))||this),"button",void 0),p(l(e),"state",{buttonIsAnimating:!1}),p(l(e),"finishButtonAnimation",function(){e.button&&e.setState({buttonIsAnimating:!1})}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.button&&this.button.addEventListener("animationend",this.finishButtonAnimation)},o.componentDidUpdate=function(){var e=this.props.resetOverlayClick;this.props.hasClickedOverlay&&(this.setState({buttonIsAnimating:!0}),e())},o.getButtonClassNames=function(){return I()({"intercom-tour-step-button":!0,animating:this.state.buttonIsAnimating})},o.render=function(){var t=this,e="click"!==this.props.progressionBehavior;return T.a.createElement("div",{className:e?"intercom-tour-step-footer":"intercom-tour-step-footer intercom-tour-step-footer-no-button-padding"},T.a.createElement("div",{className:"intercom-tour-step-progress"},Object(N.c)("product_tours_tour_step_number",{start_number:this.props.activeStepIndex+1,end_number:this.props.stepCount})),e&&T.a.createElement("div",{className:this.getButtonClassNames(),ref:function(e){return t.button=e}},T.a.createElement("button",{onClick:this.props.onContinue,tabIndex:"0"},this.props.activeStepIndex+1===this.props.stepCount?Object(N.c)("product_tours_done"):Object(N.c)("product_tours_next"))))},n}(_.Component),u=n(504),B=n(880);function A(e){var t=e.muted,n=e.onClick,o="intercom-video-control-audio-"+(t?"muted":"unmuted");return T.a.createElement("div",{className:o,onClick:n,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&n(e)},role:"button",tabIndex:"0"})}var d=n(7),b=Object(d.createSelector)(c.k,c.j,function(e,t){return{muted:e,userHasInteractedWithVideo:t}}),v=Object(o.b)(b,{changeVideoMuted:r.a})(function(e){var t=e.block,n=t.url,o=t.captions,r=t.thumbnailUrl,i=e.placement,a=e.activeStepIndex,s=e.stepCount,c=e.onClose,l=e.onContinue,p=e.muted,u=e.changeVideoMuted,d=e.userHasInteractedWithVideo,h=e.hasClickedOverlay,m=e.resetOverlayClick,f=e.progressionBehavior,b=Object(_.useState)(!0),v=b[0],g=b[1],y=Object(_.useState)(),C=y[0],O=y[1],w=Object(_.useState)(!1),k=w[0],E=w[1],S=function(){p&&O(0),u(!p)},x=function(e){e.target.classList.contains("intercom-tour-step-video-overlay")&&S(),E(!0)},j=I()("intercom-tour-step-video","intercom-tour-step-video-placement-"+i,{"intercom-tour-step-video-complete":!v}),R=I()("intercom-tour-step-video-overlay",{"intercom-tour-step-video-overlay-hidden":k});return T.a.createElement("div",{className:j},T.a.createElement("div",{className:"intercom-tour-step-video-mask"},T.a.createElement("div",{className:"intercom-tour-step-video-inner"},T.a.createElement(B.a,{srcUrl:n,captions:p?o:void 0,showControls:!1,onComplete:function(){g(!1)},onReplay:function(){return g(!0)},muted:p,startTime:C,loop:!d,thumbnailUrl:r}),T.a.createElement("div",{className:R,onClick:x,onMouseMove:function(){return E(!1)},onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&x(e)},role:"button",tabIndex:"0"},T.a.createElement("span",{className:"intercom-tour-close",onClick:c,"aria-label":Object(N.c)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&c(e)},role:"button",tabIndex:"0"},T.a.createElement(P.a,null)),v&&T.a.createElement(A,{muted:p,onClick:S}),1<s?T.a.createElement(M,{activeStepIndex:a,stepCount:s,onContinue:l,hasClickedOverlay:h,resetOverlayClick:m,progressionBehavior:f}):null))))});function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return y(g(t=r.call.apply(r,[this].concat(n))||this),"node",void 0),y(g(t),"state",{isScrolled:!1}),y(g(t),"handleScroll",function(e){t.setState({isScrolled:0<e.target.scrollTop})}),y(g(t),"handleOnCloseClick",function(){t.props.onStop()}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getClassNames=function(){return I()({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.props.hasSelector,"intercom-tour-step-post":!this.props.hasSelector,"intercom-pointer-scrolled":this.state.isScrolled})},o.calculateWidth=function(){var e=this.props.appWindow.innerWidth;return Math.min(624,e)-80},o.getStyles=function(){if(!this.props.hasSelector)return{width:this.calculateWidth()+"px"}},o.onLoad=function(){this.props.onLoad&&this.props.onLoad()},o.componentDidUpdate=function(e){this.props.step.id!==e.step.id&&this.onLoad()},o.componentDidMount=function(){this.props.onLoad()},o.renderVideoTourStep=function(){var e=this.props,t=e.onContinue,n=e.activeStepIndex,o=e.stepCount,r=e.placement,i=e.step,a=i.blocks,s=i.progressionBehavior,c=e.hasClickedOverlay,l=e.resetOverlayClick;return r?T.a.createElement(v,{block:a[0],placement:r,activeStepIndex:n,stepCount:o,onClose:this.handleOnCloseClick,onContinue:t,hasClickedOverlay:c,resetOverlayClick:l,progressionBehavior:s}):null},o.renderTourStep=function(){var t=this,e=this.props,n=e.onContinue,o=e.activeStepIndex,r=e.stepCount,i=e.author,a=e.appName,s=e.step,c=s.blocks,l=s.progressionBehavior,p=s.id,u=e.hasClickedOverlay,d=e.resetOverlayClick;return T.a.createElement(f.a,{appName:a,isReplyStyle:!1,author:i},T.a.createElement("div",{className:"intercom-tour-step-header"},T.a.createElement("span",{className:"intercom-tour-close",onClick:t.handleOnCloseClick,"aria-label":Object(N.c)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleOnCloseClick(e)},role:"button",tabIndex:"0"},T.a.createElement(P.a,null))),T.a.createElement("div",{className:"intercom-tour-step-content"},T.a.createElement(m.a,{onScroll:this.handleScroll},T.a.createElement(h.a,{blocks:c,key:"tour-step-block-"+p}))),1<r?T.a.createElement(M,{activeStepIndex:o,stepCount:r,onContinue:n,progressionBehavior:l,hasClickedOverlay:u,resetOverlayClick:d}):null)},o.render=function(){var t=this,e=this.props.step.blocks;return T.a.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames(),style:this.getStyles()},Object(u.g)(e)?this.renderVideoTourStep():this.renderTourStep())},n}(_.Component),O=n(505),w=n(896),k=n(5),E=n(123),S=k.c.div("position:absolute;z-index:",Object(E.d)(),";");function x(e){var t,n,o,r,i,a,s,c,l,p,u,d=e.onClick,h=e.appWindow,m=e.targetNode,f=(t=h,n=m.getBoundingClientRect(),o=n.left,r=n.right,i=n.top,a=n.bottom,s=t.pageXOffset,c=t.pageYOffset,{left:o+=s,right:r+=s,top:i+=c,bottom:a+=c}),b=f.left,v=f.right,g=f.top,y=f.bottom,C=(l=h.document,p=l.body,u=l.documentElement,p&&u?Math.max(p.scrollHeight,p.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight):0);return T.a.createElement(T.a.Fragment,null,T.a.createElement(S,{style:{top:0,left:0,right:0,height:g},tabIndex:"-1",onClick:d}),T.a.createElement(S,{style:{top:g,left:0,width:b,height:y-g},tabIndex:"-1",onClick:d}),T.a.createElement(S,{style:{top:g,left:v,right:0,height:y-g},tabIndex:"-1",onClick:d}),T.a.createElement(S,{style:{top:y,left:0,right:0,bottom:0,height:C-y},tabIndex:"-1",onClick:d}))}var j=n(233),R={name:"1j1kj5x",styles:"border:none;box-shadow:none;"},H=Object(k.c)(j.a)("z-index:",Object(E.d)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);",function(e){return e.isVideo&&R});function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){W(t,e,n[e])})}return t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(o){var e,t;function n(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return W(D(i=o.call.apply(o,[this].concat(t))||this),"state",{width:0,height:0,opacity:0,placement:null,hasClickedOverlay:!1}),W(D(i),"handleDimensionFrameSize",function(e){var t=e.height,n=e.width;i.setState({width:n,height:t,opacity:1})}),W(D(i),"trackingKey",function(e){return i.props.isPreviewingTour?e+"_preview":e}),W(D(i),"handleOnTourContinue",function(){var e=i.props,t=e.onContinue,n=e.activeStepIndex,o=e.stepCount;i.setState({opacity:0}),t();var r=n+1===o?"done":"next";i.context.addMetric("clicked",r,i.trackingKey("tour"),null,i.trackingMetadata())}),W(D(i),"handleOnTourStop",function(){var e=i.props.onStop;i.context.addMetric("clicked","stop",i.trackingKey("tour"),null,i.trackingMetadata()),i.setState({opacity:0}),e()}),W(D(i),"handleMissingCssSelector",function(){var e=i.props,t=e.activeStep,n=e.onFailure,o=e.isPreviewingTour;t.selector&&(i.context.addMetric("css_selector_match_failed",i.trackingKey("tour_step"),"positioner",null,F({},i.trackingMetadata(),i.activeStepSelectorMetadata())),o||n())}),W(D(i),"handleTourStepLoad",function(){var e=i.props,t=e.stepCount,n=e.activeStepIndex,o=e.onComplete;n+1===t&&o(),i.context.addMetric("viewed",i.trackingKey("tour_step"),"tour",null,i.trackingMetadata())}),W(D(i),"handleOverlayClick",function(){i.context.addMetric("clicked",i.trackingKey("outside_tour_step"),"tour",null,i.trackingMetadata()),i.setState({hasClickedOverlay:!0})}),W(D(i),"resetOverlayClick",function(){i.setState({hasClickedOverlay:!1})}),W(D(i),"handleTargetClick",function(){i.isClickToProgress()&&i.handleOnTourContinue()}),W(D(i),"handlePlacementChange",function(e){i.setState({placement:e})}),W(D(i),"isClickToProgress",function(){return"click"===i.props.activeStep.progressionBehavior}),W(D(i),"getOverlayRenderer",function(){if(i.isClickToProgress())return i.clickToProgressOverlayRenderer}),W(D(i),"clickToProgressOverlayRenderer",function(e,t,n){var o=t.appWindow;return n?T.a.createElement(x,{onClick:e,targetNode:n,appWindow:o}):null}),i}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getChildDimensions=function(){var e=this.state;return{width:e.width,height:e.height,opacity:e.opacity}},r.getFrameDimensions=function(){var e=this.state;return{width:e.width,height:e.height}},r.trackingMetadata=function(){var e=this.props,t=e.activeTourId,n=e.activeStep,o=e.activeStepIndex,r=e.stepCount;return{tour_id:t,tour_step_id:n.id,active_step_index:o,step_count:r}},r.activeStepSelectorMetadata=function(){var e=this.props.activeStep,t=!1;if(e.selectors.auto_secondary)try{t=null!=window.parent.document.querySelector(e.selectors.auto_secondary)}catch(e){}return F({},e.selectors,{secondary_currently_matches:t})},r.render=function(){var e=this,t=this.props,n=t.appWindow,o=t.appName,r=t.author,i=t.activeStep,a=t.stepCount,s=t.activeStepIndex,c=this.state.placement,l=!!i.selector,p=Object(u.g)(i.blocks);return T.a.createElement(w.a,{appWindow:n,scrollable:!0,targetSelector:i.selector,childDimensions:this.getChildDimensions(),renderFallback:!0,key:"tour-step-"+i.id,onMissingSelector:this.handleMissingCssSelector,onOverlayClick:this.handleOverlayClick,onTargetClick:this.handleTargetClick,onPlacementChange:this.handlePlacementChange,hideArrow:p||!i.selector,renderOverlay:this.getOverlayRenderer(),shouldAnimate:this.isClickToProgress()},T.a.createElement(H,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame",isVideo:p},function(){return T.a.createElement(O.a,{id:"tour-frame",key:"tour-frame",onChange:e.handleDimensionFrameSize},T.a.createElement(C,{appWindow:n,appName:o,author:r,step:i,activeStepIndex:s,stepCount:a,hasSelector:l,onLoad:e.handleTourStepLoad,onContinue:e.handleOnTourContinue,onStop:e.handleOnTourStop,placement:c,hasClickedOverlay:e.state.hasClickedOverlay,resetOverlayClick:e.resetOverlayClick}))}))},n}(_.PureComponent);V.contextTypes={addMetric:a.a.func},n.d(t,"mapStateToProps",function(){return q}),n.d(t,"mapDispatchToProps",function(){return L});var q=function(e){var t=Object(c.b)(e),n=Object(c.e)(e),o=Object(c.d)(e),r=Object(c.c)(e),i=Object(c.a)(e),a=Object(c.g)(e),s=e.app.name;return{activeTourId:t.id,activeStep:n,activeStepIndex:o,stepCount:r,appName:s,author:i,isPreviewingTour:a}},L=function(e){return{onContinue:function(){e(Object(r.e)())},onStop:function(){e(Object(r.i)())},onComplete:function(){e(Object(r.c)())},onFailure:function(){e(Object(r.f)())}}};t.default=Object(o.b)(q,L)(V)},942:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(505),r=n(23),s=n(16),c=n(2),l=n.n(c),p=n(43),u=n(841),d=n(847),h=n(843),m=n(863),f=n(504),b=n(20),v=n(864),g=n(491);function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C(y(o=r.call.apply(r,[this].concat(t))||this),"addSnippetMetric",function(e){var t=o.props.conversation,n=Object(b.r)(t);o.context.addMetric(e,"snippet","in_app","",{conversation_id:t.id,part_id:n.id,part_type:n.messageType})}),C(y(o),"addClickedMetric",function(){o.addSnippetMetric("clicked")}),C(y(o),"handleClick",function(){var e=o.props,t=e.conversation,n=e.onClick;o.addClickedMetric(),n(t)}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.addSnippetMetric("received")},o.shouldRenderChatStyle=function(){var e=this.props,t=e.conversation,n=e.stack;return(Object(b.j)(t)||Object(b.i)(t))&&!n},o.getConversationParts=function(){return this.props.conversation.parts.filter(function(e){return!1===Object(g.a)(e.partType)})},o.renderBody=function(e){if(1===e.length&&Object(f.h)(e[0]))return a.a.createElement(v.a,{text:Object(f.d)(e[0])});var t=Object(f.e)(this.getConversationParts()).summaryText;return a.a.createElement(u.a,{text:t})},o.renderPlainStyle=function(e,t,n,o){var r=this;return a.a.createElement("div",{className:"intercom-notification"},a.a.createElement("div",{className:"intercom-snippet",onClick:r.handleClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r.handleClick(e)},role:"button",tabIndex:"0"},a.a.createElement(d.a,{appName:n,author:e,isReplyStyle:o},a.a.createElement("div",{className:"intercom-snippet-body"},this.renderBody(t)))))},o.renderChatStyle=function(e,t,n,o){var r=this;return a.a.createElement("div",{className:"intercom-notification"},a.a.createElement("div",{className:"intercom-chat-snippet",onClick:r.handleClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r.handleClick(e)},role:"button",tabIndex:"0"},a.a.createElement("div",{className:"intercom-chat-snippet-avatar"},a.a.createElement(h.a,{author:e})),a.a.createElement("div",{className:"intercom-chat-snippet-card"},a.a.createElement(m.a,{author:e,appName:n,isReplyStyle:o}),a.a.createElement("div",{className:"intercom-snippet-body intercom-chat-snippet-body"},this.renderBody(t)))))},o.render=function(){var e=this.props,t=e.appName,n=e.conversation.userParticipated,o=Object(b.d)(this.props.conversation);if(!o)return null;var r=o.author,i=o.body;return this.shouldRenderChatStyle()?this.renderChatStyle(r,i,t,n):this.renderPlainStyle(r,i,t,n)},n}(o.Component);O.defaultProps={stack:!1},O.propTypes={conversation:l.a.shape({id:l.a.any.isRequired,parts:l.a.arrayOf(l.a.shape({author:l.a.object.isRequired,body:l.a.array.isRequired})).isRequired,userParticipated:l.a.bool.isRequired}).isRequired,appName:l.a.string.isRequired,stack:l.a.bool.isRequired,onClick:l.a.func.isRequired},O.contextTypes={addMetric:l.a.func.isRequired};var w=n(15),k=n(513),E=n(506),S=n(514),x=n(11),j=n.n(x);function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(o){var e,t;function n(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _(R(r=o.call.apply(o,[this].concat(t))||this),"handleDismiss",function(){var e=r.props,t=e.onNotificationDismiss,n=e.conversations.map(function(e){return e.id});r.addDismissMetrics(n),t(n);var o=Object(S.a)();o&&o.focus()}),_(R(r),"getDismissButtonClassName",function(){return j()({"intercom-notifications-dismiss-button":!0,"intercom-notifications-dismiss-button-visible":r.isTouchScreenDevice()})}),r}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.componentDidMount=function(){var e=this.props.onDisplayNotifications,t=this.getSortedConversations();this.focusTrap=new E.a({document:this.props.frameWindow.document}),e(t)},r.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},r.addDismissMetrics=function(e){var t=this.context.addMetric;e.forEach(function(e){t("closed","message","in_app","from_snippet",{conversation_id:e})})},r.getSortedConversations=function(){return this.props.conversations.slice(-3).sort(function(e,t){return e.lastPartCreatedAt>t.lastPartCreatedAt})},r.isTouchScreenDevice=function(){return"ontouchstart"in window||0<navigator.maxTouchPoints},r.renderDismissButton=function(){var e=1===this.props.conversations.length?Object(w.c)("clear"):Object(w.c)("clear_all");return a.a.createElement("button",{className:this.getDismissButtonClassName(),onClick:this.handleDismiss,tabIndex:"0"},e,a.a.createElement("span",{className:"intercom-notifications-dismiss-button-icon"}))},r.render=function(){var e=this.getSortedConversations(),t=this.props,n=t.frameWindow,o=t.appName,r=t.onNotificationClick,i=1<e.length;return a.a.createElement("div",{className:"intercom-notifications"},0<e.length?this.renderDismissButton():null,a.a.createElement(p.TransitionGroup,null,e.map(function(e){return a.a.createElement(p.CSSTransition,{key:e.id,classNames:"intercom-snippet",timeout:{enter:200,exit:200}},a.a.createElement(O,{conversation:e,stack:i,appName:o,onClick:r}))})),a.a.createElement(k.a,{appWindow:n}))},n}(o.Component);T.propTypes={appName:l.a.string.isRequired,frameWindow:l.a.any.isRequired,conversations:l.a.array.isRequired,onNotificationClick:l.a.func.isRequired,onNotificationDismiss:l.a.func.isRequired,onDisplayNotifications:l.a.func.isRequired},T.contextTypes={addMetric:l.a.func.isRequired};var I=n(73),N=n(65),P=n(226),M=n(239),B=n(185),A=Object(r.b)(function(e){return{appName:e.app.name,conversations:Object(B.a)(e)}},function(i){return{onNotificationClick:function(e){var t=e.id,n=e.parts,o=n[n.length-1],r=o.messageType;-1<[void 0,"chat","link","notificationChannels","video"].indexOf(r)?(i(Object(N.g)(t)),i(Object(I.l)(s.a,t))):i(Object(P.b)(t,o.id))},onNotificationDismiss:function(e){i(Object(M.b)(s.a,e))},onDisplayNotifications:function(e){e.forEach(function(e){var t=e.id,n=e.parts,o=n[n.length-1];i(Object(P.c)(t,o.id))})}}})(T),H=n(5),F=n(233),D=n(123),W=Object(H.c)(F.a)("position:fixed;bottom:",Object(D.c)(),"px;right:",Object(H.f)("horizontalPadding"),"px;z-index:",Object(D.d)(),";",function(e){var t=e.width,n=e.height;return Object(H.b)("width:",t+10,"px;height:",n+5,"px;")}," ",function(e){var t=e.theme;return t.isLeftAlignment&&Object(H.b)("left:",t.horizontalPadding,"px;right:auto;")});function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return L});var L=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return q(V(o=r.call.apply(r,[this].concat(t))||this),"state",{width:0,height:0}),q(V(o),"handleMeasurementChange",function(e){var t=e.width,n=e.height;o.setState({width:t,height:n})}),o}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var t=this;return a.a.createElement(W,{frameName:"intercom-notifications-frame",width:this.state.width,height:this.state.height},function(e){return a.a.createElement(i.a,{onChange:t.handleMeasurementChange},a.a.createElement(A,{frameWindow:e}))})},n}(o.Component)},946:function(e,t,n){"use strict";n.r(t);var o=n(23),r=n(893),i=n(878),l=n(59),p=n(14),a=n(16),s=n(65),c=n(73),u=n(729),d=n(810);n.d(t,"mapStateToProps",function(){return h});var h=function(e){var t=e.user.isPresent,n=e.app,o=n.name,r=n.userConversationAttachmentsEnabled,i=n.userConversationGifsEnabled,a=Object(d.a)(e),s=a[0],c=p.a.isMobileBrowser();return{appName:o,conversation:s,part:a[0].parts[0],userIsPresent:t,isMobile:c,showUploadButton:r,showGifButton:i,shouldShowUpfrontEmailComposer:Object(l.g)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.default=Object(o.b)(h,function(n){return{onOpen:function(e,t){n({type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t})},onClose:function(e){n({type:"CLOSE_POINTER_MESSAGE"}),n(Object(u.a)(e))},onConversationRead:function(e){n(Object(c.n)(a.a,e))},onComposerOrFormInputClick:function(e){n({type:"CLOSE_POINTER_MESSAGE"}),n(Object(u.a)(e)),n(Object(s.g)(e)),n(Object(c.l)(a.a,e))},onReactionSelect:function(e,t){n(Object(c.k)(a.a,e,t,!1))}}},i.b)(r.a)},947:function(e,t,n){"use strict";n.r(t);var o=n(23),r=n(2),i=n.n(r),a=n(0),s=n.n(a),c=n(43),l=n(878);var p=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var r=o.prototype;return r.componentDidMount=function(){var e=this.props,t=e.isFetching,n=e.isFetched,o=e.onFetch;t||n||o()},r.render=function(){var e=this.props;return s.a.createElement(c.TransitionGroup,null,e.isFetched?s.a.createElement(c.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},s.a.createElement(l.a,e)):null)},o}(a.Component);p.propTypes={isFetching:i.a.bool.isRequired,isFetched:i.a.bool.isRequired,onFetch:i.a.func.isRequired};var u=n(16),d=n(73),h=n(241),m=n(20);n.d(t,"mapStateToProps",function(){return f}),n.d(t,"mapDispatchToProps",function(){return b}),n.d(t,"mergeProps",function(){return v});var f=function(e){var t=Object(h.a)(e)[0];return{isFetching:t.isFetching,isFetched:!Object(m.m)(t),conversation:t}},b=function(t){return{onFetch:function(e){t(Object(d.l)(u.a,e))}}},v=function(e,t,n){return Object.assign({},e,t,n,{onFetch:function(){t.onFetch(e.conversation.id)}})};t.default=Object(o.b)(f,b,v)(p)}}]);